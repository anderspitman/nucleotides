#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', '..', 'lib'))
require 'evaluation'
require 'yaml'

evaluations = YAML.load File.read(ARGV.first)
keys        = ["benchmark_type", "data_id", "entry_id", "image", "task"]

output = Evaluation.remap(keys.length - 1 , evaluations) do |e|
  Evaluation.aggregate(e)
end

puts YAML.dump(output)
